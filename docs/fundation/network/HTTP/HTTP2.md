# HTTP2

>HTTP/2 协议是基于 HTTPS 的，所以 HTTP/2 的安全性也是有保障的。

## HTTP/2 相⽐ HTTP/1.1 性能上的改进

1. 头部压缩
   - 同时发送多个头部相同或相似的请求，协议会消除重复的部分
   - 用的是HPACK 算法：在客户端和服务器同时维护⼀张头信息表，所有字段都会存⼊这个表，⽣成⼀个索引号，以后就不发送同样字段了，只发送索引号，提⾼速度。  

2. ⼆进制格式
   - 不采用HTTP/1.1 ⾥的纯⽂本形式的报⽂，全⾯采⽤了⼆进制格式，头信息和数据体都是⼆进制，统称为帧（frame）：头信息帧和数据帧。  

3. 多路复用
   - 一个连接中并发多个请求或回应，不用按顺序一一对应
   - 不需要排队等待，也就不会再出现「队头阻塞」问题，降低了延迟
   - 当一个请求非常耗时，先回应已处理好的部分，回应其他请求后再回应该请求剩下的部分  

4. 数据流
   - 每个请求或回应的所有数据包，称为⼀个数据流（ Stream ），每个数据流都有编号
   - 客户端可以指定数据流的优先级。优先级⾼服务器就先响应。  

5. 服务器推送  
   - 服务不再是被动地响应，也可以主动向客户端发送消息。
   - 浏览器请求HTML时，提前吧可能会用到的JS，CSS等推送给客户端  

## 缺陷

>HTTP/2 多个请求复⽤⼀个TCP连接，⼀旦发⽣丢包，触发TCP重传机制，就会阻塞住所有的 HTTP 请求。  

