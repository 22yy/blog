# 相关问题  

## 死锁  

两个线程互相等待对方释放资源时，就会发生死锁    

避免死锁的方法： 
1. 加锁顺序：如果一个线程要获取多个锁，必须按照一定的顺序去获取   
2. 加锁时限：一个线程尝试去获取锁，如果在指定时间内获取不到，就放弃等待锁，并释放自己现在所持有的锁，然后随机等待
定时间再去获取锁  
3. 死锁检测   
当一个线程获取锁的时候，会在相应的数据结构中记录下来，同样
如果有线程请求锁也会在相应的数据结构中记录下来，当一个线程
请求失败时，他就会去这个数据结构中检查是否有死锁产生，如果
发现死锁，则释放所有锁，回退并等待一段时间后再次尝试   

## 进程与线程的区别
进程间的通信方式：  
1. 管道：速度慢，容量有限，只有父子进程能通信   
2. FIFO：任何进程间都能通信，但速度慢   
3. 消息队列：容量受系统限制  
4. 信号量：不能传递复东消息，只能用来同步  
5. 共享内存：很容易控制容量，速度快，但要保持同步  

线程间的通信方式：   
1. 共享内存：线程之间共享进程的公共状态，线程之间通过读写内存中的公共状态来隐式通信  
2. 消息传递：线程之间没有公共的状态，线程之间必须通过明确的发送消息来显式地进行通信   
3. 管道流：主要用于线程之间的数据传输    

进程：在系统中运行的一个应用程序   
线程：线程是进程执行的基本单元，一个进程的所有任务都在线程中执行   

区别：
1. 同一进程的线程共享本进程的地址空间，而进程之问则是独立的空间   
2. 同一进程的线程共享本进程的资源，而进程之问的资源是独立的  
3. 一个进程崩溃后不会对其他进程产生影响，但是一个线程崩溃整个进程都会死掉，所以多进程比多线程健壮  
4. 进程切换时，消耗资源大、效率高，涉及频繁切换时，使用线程好于进程；同时如果要求同时进行并且又要共享某些变量的并发操作，只能采用线程  
5. 每个独立的进程有一个程序运行的入口、顺序执行序列和程序入口，但线程不能独立执行，必须存在应用程序中，由应用程序提供多个线程执行控制
6. 线程是处理器调度的基本单位，但是进程不是,进程是资源分配的基本单位